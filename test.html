<!DOCTYPE html>
<meta charset="utf-8">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/3.3.1/masonry.pkgd.min.js"></script>
<html>
<body style="width:100%;">
<div id="container"></div>
<a id="button" onclick="loadDoc()">更多</a>
<script>
/* @license minigrid v1.6.0 - minimal cascading grid layout http://alves.im/minigrid */
!function(t){"use strict";function e(t,e,n,o,r){var i=Array.prototype.forEach,f=t instanceof Node?t:document.querySelector(t);if(!f)return!1;var s=f.querySelectorAll(e);if(0===s.length)return!1;n="number"==typeof n&&isFinite(n)&&Math.floor(n)===n?n:6,f.style.width="";var u=f.getBoundingClientRect().width,l=s[0].getBoundingClientRect().width+n,a=Math.max(Math.floor((u-n)/l),1),c=0;u=l*a+n+"px",f.style.width=u,f.style.position="relative";for(var d=[],p=[],h=0;a>h;h++)p.push(h*l+n),d.push(n);i.call(s,function(t){var e=d.slice(0).sort(function(t,e){return t-e}).shift();e=d.indexOf(e);var r=p[e],f=d[e],s=["webkitTransform","MozTransform","msTransform","OTransform","transform"];return t.style.position="absolute",o||i.call(s,function(e){t.style[e]="translate("+r+"px,"+f+"px)"}),d[e]+=t.getBoundingClientRect().height+n,c+=1,o?o(t,r,f,c):void 0});var m=d.slice(0).sort(function(t,e){return t-e}).pop();f.style.height=m+"px","function"==typeof r&&r(s)}"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.minigrid=e}(this);
var z = 5;
var i = 0;
loadDoc();
(function(){
        minigrid('#container', '.grid-item');
   
        window.addEventListener('resize', function(){
          minigrid('#container', '.grid-item');
        });
      })();
function loadDoc() {
  var xhttp, xmlDoc;
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    xmlDoc = this.responseXML;
    var txt = "";
    var x = xmlDoc.getElementsByTagName("image");
    var y = xmlDoc.getElementsByTagName("p");
    if (z == x.length) {
    document.getElementById("button").innerHTML = "没有更多";
    document.getElementById("button").onclick = "";
    }
    for (;i < z;i++) {
      txt = txt + "<div style='width:200px;float: left;'><img style='width:100%;' src='" + x[i].childNodes[0].nodeValue + "'/><h5>" + y[i].childNodes[0].nodeValue + "</h5></div>";
    }
    z += 5;
    document.getElementById("container").innerHTML += txt;
    }
  };
  xhttp.open("GET", "pin.xml", true);
  xhttp.send();
}
</script>
</body>
</html>
